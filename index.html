<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>God Mode - Esports Hub</title>
  <!-- Favicon -->
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath d='M50,5 L95,27.5 L95,72.5 L50,95 L5,72.5 L5,27.5 Z' fill='%230ff'/%3E%3Ctext x='50' y='62' font-size='40' font-family='Orbitron, sans-serif' fill='white' text-anchor='middle' font-weight='bold'%3EGM%3C/text%3E%3C/svg%3E">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@300;500;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary-cyan: #0ff;
      --hover-yellow: #ff0;
      --dark-grey: #1a1a1a;
      --off-white: #f1f1f1;
      --dark-bg: #0d0d0d;
    }
    body {
      margin: 0;
      font-family: 'Rajdhani', sans-serif;
      background-color: var(--dark-bg);
      color: var(--off-white);
    }
    h1, h2, h3 {
      font-family: 'Orbitron', sans-serif;
      letter-spacing: 1px;
    }
    nav {
      background: rgba(17, 17, 17, 0.8);
      backdrop-filter: blur(10px);
      padding: 0.5rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 1000;
      border-bottom: 1px solid #333;
    }
    nav a {
      color: var(--primary-cyan);
      margin-left: 20px;
      text-decoration: none;
      transition: color 0.3s;
      font-weight: bold;
    }
    nav a:hover {
      color: var(--hover-yellow);
    }
    .logo-svg {
        height: 50px;
        width: auto;
    }
    .hero {
      text-align: center;
      padding: 8rem 2rem;
      position: relative;
      overflow: hidden;
      height: 70vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .slideshow-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 1;
    }
    .slide {
        position: absolute;
        width: 100%;
        height: 100%;
        background-size: cover;
        background-position: center;
        opacity: 0;
        transition: opacity 1.5s ease-in-out;
    }
    .slide.active {
        opacity: 1;
    }
    .hero-content {
        position: relative;
        z-index: 2;
        padding: 2rem;
        border-radius: 10px;
    }
    .hero h1 {
      font-size: 3.5rem;
      color: var(--primary-cyan);
      /* REPLACE the existing text-shadow with this one */
      text-shadow: 3px 2px 8px rgba(0, 0, 0, 0.9), 0 0 10px var(--primary-cyan);
    }

    .hero p {
    font-size: 1.3rem;
    margin: 1rem 0 2rem;
    color: #ccc;
    /* ADD the line below */
    text-shadow: 3px 1px 4px rgba(0, 0, 0, 0.9);
    }

    .btn {
      font-family: 'Orbitron', sans-serif;
      background-color: var(--primary-cyan);
      color: var(--dark-bg);
      border: 1px solid var(--primary-cyan);
      padding: 1rem 2rem;
      margin: 10px;
      cursor: pointer;
      border-radius: 8px;
      font-weight: bold;
      transition: 0.3s;
      text-transform: uppercase;
    }
    .btn:hover {
      background-color: var(--primary-cyan);
      color: var(--dark-bg);
      box-shadow: 0 0 15px var(--primary-cyan);
    }
    .section {
      padding: 4rem 2rem;
      max-width: 1200px;
      margin: 0 auto;
    }
    .section h2 {
        text-align: center;
        font-size: 2.5rem;
        color: var(--off-white);
        margin-bottom: 3rem;
    }
    .cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
    }
    .card {
      background: var(--dark-grey);
      border-radius: 10px;
      overflow: hidden;
      border: 1px solid #333;
      transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
      position: relative;
      cursor: pointer;
    }
    .card img {
      width: 100%;
      height: 160px;
      object-fit: cover;
    }
    .card-content {
      padding: 1.5rem;
    }
    .card:hover {
      transform: translateY(-8px);
      box-shadow: 0 0 25px var(--primary-cyan);
      border-color: var(--primary-cyan);
    }
    .card .status-badge {
        position: absolute; top: 10px; right: 10px; padding: 5px 10px; border-radius: 5px; font-family: 'Orbitron', sans-serif; font-size: 0.8rem; color: #000; font-weight: bold;
    }
    .status-live { background-color: var(--hover-yellow); text-shadow: 0 0 5px #000; }
    .status-upcoming { background-color: var(--primary-cyan); }

    footer {
      background: #111; text-align: center; padding: 1.5rem; margin-top: 2rem; font-size: 0.9rem; color: #aaa; border-top: 1px solid #333;
    }
    .stats-container, .featured-games-container {
      display: flex; justify-content: space-around; flex-wrap: wrap; text-align: center; gap: 1rem;
    }
    .stat-box {
      margin: 1rem; background: var(--dark-grey); padding: 2rem; border-radius: 12px; min-width: 220px; border: 1px solid #333;
    }
    .stat-box h3 { font-size: 2.5rem; color: var(--hover-yellow); margin: 0 0 0.5rem 0;}
    .game-circle {
        display: flex; flex-direction: column; align-items: center; gap: 1rem;
    }
    .game-circle img {
        width: 120px; height: 120px; border-radius: 50%; object-fit: cover; border: 3px solid #555; transition: transform 0.3s, box-shadow 0.3s, border-color 0.3s; cursor: pointer;
    }
    .game-circle img:hover {
        transform: scale(1.1); box-shadow: 0 0 25px var(--primary-cyan); border-color: var(--primary-cyan);
    }
    .sponsors-logos {
      display: flex; justify-content: center; align-items: center; gap: 2rem; flex-wrap: wrap;
    }
    .sponsors-logos img {
      max-height: 80px; width: auto; opacity: 0.9; transition: 0.3s; object-fit: contain; background: #fff; border-radius: 4px; padding: 1px;
    }
    .sponsors-logos img:hover {
      cursor: pointer; opacity: 1; transform: scale(1.1);
    }
    .fade-in-section {
      opacity: 0; transform: translateY(30px); transition: opacity 0.8s ease-out, transform 0.8s ease-out;
    }
    .fade-in-section.visible {
      opacity: 1; transform: translateY(0);
    }
  </style>
</head>
<body>
  <nav>
    <a href="index.html">
        <svg class="logo-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 250 60">
            <defs><linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" style="stop-color:rgb(0,255,255);stop-opacity:1" /><stop offset="100%" style="stop-color:rgb(0,128,255);stop-opacity:1" /></linearGradient></defs>
            <path d="M 10 30 L 30 10 L 50 30 L 30 50 Z" fill="url(#grad1)"/>
            <text x="65" y="42" font-family="Orbitron, sans-serif" font-size="30" fill="white" font-weight="bold">GOD MODE</text>
        </svg>
    </a>
    <div>
      <a href="index.html">Home</a>
      <a href="registrations.html">Registrations</a>
      <a href="teams.html">Teams</a>
      <a href="players.html">Players</a>
    </div>
  </nav>

  <section class="hero">
      <div class="slideshow-container">
          <div class="slide"></div>
          <div class="slide"></div>
          <div class="slide"></div>
      </div>
      <div class="hero-content">
        <h1>Welcome to God Mode</h1>
        <p>The ultimate arena for global esports champions.</p>
        <button class="btn" onclick="window.location.href='register.html'">
              Register Your Team
        </button>
      </div>
  </section>

  <section class="section fade-in-section">
    <h2>Upcoming Tournaments</h2>
    <div id="tournament-cards" class="cards">
        <p style="text-align: center; width: 100%;">Loading tournaments...</p>
    </div>
  </section>

  <section class="section fade-in-section">
      <h2>Featured Games</h2>
      <div id="featured-games-container" class="featured-games-container"></div>
  </section>

  <section class="section stats fade-in-section">
    <h2>God Mode Live Stats</h2>
    <div id="stats-container" class="stats-container">
        <p style="text-align: center; width: 100%;">Loading stats...</p>
    </div>
  </section>
  
  <section class="section hall-of-fame fade-in-section">
    <h2>Hall of Fame</h2>
    <div id="hall-of-fame-cards" class="cards"></div>
  </section>

  <section class="section sponsors fade-in-section">
    <h2>Our Sponsors</h2>
    <div class="sponsors-logos">
      <img src="images/nvidia.jpg" alt="NVIDIA" onerror="this.onerror=null;this.src='https://placehold.co/150x80/ffffff/000000?text=NVIDIA';">
      <img src="images/amd.png" alt="AMD" onerror="this.onerror=null;this.src='https://placehold.co/150x80/ffffff/000000?text=AMD';">
      <img src="images/steam.png" alt="Steam" onerror="this.onerror=null;this.src='https://placehold.co/150x80/ffffff/000000?text=Steam';">
      <img src="images/twitch.jpg" alt="Twitch" onerror="this.onerror=null;this.src='https://placehold.co/150x80/ffffff/000000?text=Twitch';">
      <img src="images/discord.png" alt="Discord" onerror="this.onerror=null;this.src='https://placehold.co/150x80/ffffff/000000?text=Discord';">
    </div>
  </section>

  <footer>
    <p>&copy; 2025 God Mode Esports Hub | CodingGods</p>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const simulatedData = {
        slideshowImages: [
            'images/banner1.png',
            'images/banner2.png',
            'images/banner3.jpeg'
        ],
        featuredGames: [
            { name: "Valorant", imageUrl: "images/valorant.png" }, 
            { name: "Dota 2", imageUrl: "images/dota.jpeg" }, 
            { name: "Apex Legends", imageUrl: "images/apex.jpg" }, 
            { name: "League of Legends", imageUrl: "images/league.jpg" }, 
            { name: "CS:GO", imageUrl: "images/csgo.png" }
        ],
        hallOfFame: [
            { title: "Team Phoenix", detail: "Winners: Valorant Nexus 2024", prize: 40000 }, { title: "Player 'Miracle'", detail: "Champion: Dota Eclipse 2024", prize: 20000 }, { title: "Team Liquid", detail: "Winners: CS:GO Clash 2023", prize: 50000 }, { title: "Player 'Faker'", detail: "MVP: LoL Rift 2024", prize: 25000 }
        ]
      };

      // --- DYNAMIC DATA FETCHING ---
      async function fetchHomepageData() {
          try {
              const response = await fetch('http://localhost:3000/api/homepage-data');
              if (!response.ok) throw new Error('Network response was not ok');
              const data = await response.json();
              
              const statsContainer = document.getElementById('stats-container');
              statsContainer.innerHTML = `
                  <div class="stat-box"> <h3 id="teams-stat">0+</h3> <p>Registered Teams</p> </div>
                  <div class="stat-box"> <h3 id="players-stat">0+</h3> <p>Active Players</p> </div>
                  <div class="stat-box"> <h3 id="prize-stat">$0+</h3> <p>Total Prize Pools</p> </div>
              `;
              
              const tournamentsContainer = document.getElementById('tournament-cards');
              if (data.tournaments && data.tournaments.length > 0) {
                  tournamentsContainer.innerHTML = data.tournaments.map(t => {
                      const formattedPrize = `$${(t.prize_pool || 0).toLocaleString()}`;
                      let imgName = "tournament_placeholder.jpg"; // Default image
                      const nameLower = t.tournament_name.toLowerCase();

                      if (nameLower.includes('valorant')) imgName = "valorant.png";
                      else if (nameLower.includes('dota')) imgName = "dota.jpeg";
                      else if (nameLower.includes('apex')) imgName = "apex.jpg";
                      else if (nameLower.includes('league')) imgName = "league.jpg";
                      else if (nameLower.includes('rocket')) imgName = "rocket.jpg";
                      else if (nameLower.includes('cs:go')) imgName = "csgo.png";
                      
                      return `
                      <div class="card">
                          <img src="images/${imgName}" alt="${t.tournament_name}" onerror="this.onerror=null;this.src='https://placehold.co/400x160/1a1a1a/ffffff?text=EVENT';">
                          <div class="card-content">
                              <h3>${t.tournament_name}</h3>
                              <p><strong>Prize Pool:</strong> ${formattedPrize}</p>
                              <p><strong>Dates:</strong> ${t.start_date} to ${t.end_date}</p>
                          </div>
                      </div>`;
                  }).join('');
              } else {
                  tournamentsContainer.innerHTML = '<p style="text-align:center; width:100%;">No upcoming tournaments found.</p>';
              }

              return data.stats;

          } catch (error) {
              console.error("Failed to fetch homepage data:", error);
              document.getElementById('stats-container').innerHTML = '<p style="text-align:center; width:100%;">Could not load stats. Is the server running?</p>';
              document.getElementById('tournament-cards').innerHTML = '<p style="text-align:center; width:100%;">Could not load tournaments.</p>';
              return null;
          }
      }

      function animateValue(element, start, end, duration, prefix = '', suffix = '+') {
          if (!element || element.classList.contains('animated')) return;
          element.classList.add('animated');
          let startTimestamp = null;
          const step = (timestamp) => {
              if (!startTimestamp) startTimestamp = timestamp;
              const progress = Math.min((timestamp - startTimestamp) / duration, 1);
              const currentValue = Math.floor(progress * (end - start) + start);
              element.innerHTML = prefix + currentValue.toLocaleString() + suffix;
              if (progress < 1) {
                  window.requestAnimationFrame(step);
              }
          };
          window.requestAnimationFrame(step);
      }
      
      function renderFeaturedGames() {
          const container = document.getElementById('featured-games-container');
          container.innerHTML = simulatedData.featuredGames.map(game => {
              return `
                <div class="game-circle">
                    <img src="${game.imageUrl}" alt="${game.name}" onerror="this.onerror=null;this.src='https://placehold.co/200x200/ccc/111?text=Game';">
                    <h3>${game.name}</h3>
                </div>`;
          }).join('');
      }

      function renderHallOfFame() {
          const container = document.getElementById('hall-of-fame-cards');
          container.innerHTML = simulatedData.hallOfFame.map(entry => {
              const formattedPrize = `$${entry.prize.toLocaleString()}`;
              return `
                  <div class="card">
                      <div class="card-content">
                          <h3>${entry.title}</h3>
                          <p>${entry.detail}</p>
                          <p>Prize: ${formattedPrize}</p>
                      </div>
                  </div>`;
          }).join('');
      }
      
      function startSlideshow() {
          const slides = document.querySelectorAll('.slide');
          simulatedData.slideshowImages.forEach((imgUrl, index) => {
              if(slides[index]) {
                  slides[index].style.backgroundImage = `url('${imgUrl}')`;
              }
          });
          
          let currentSlide = 0;
          if (slides.length > 0) {
              slides[currentSlide].classList.add('active');
              setInterval(() => {
                  slides[currentSlide].classList.remove('active');
                  currentSlide = (currentSlide + 1) % slides.length;
                  slides[currentSlide].classList.add('active');
              }, 5000); // Change slide every 5 seconds
          }
      }

      const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
              if (entry.isIntersecting) {
                  entry.target.classList.add('visible');
                  if (entry.target.classList.contains('stats') && window.liveStats) {
                      const teamsEl = document.getElementById('teams-stat');
                      const playersEl = document.getElementById('players-stat');
                      const prizeEl = document.getElementById('prize-stat');
                      animateValue(teamsEl, 0, window.liveStats.teams || 0, 2000);
                      animateValue(playersEl, 0, window.liveStats.players || 0, 2000);
                      animateValue(prizeEl, 0, window.liveStats.prizes || 0, 2000, '$');
                      observer.unobserve(entry.target);
                  }
              }
          });
      }, { threshold: 0.2 });

      document.querySelectorAll('.fade-in-section').forEach(section => {
          observer.observe(section);
      });

      // Render static content
      renderFeaturedGames();
      renderHallOfFame();
      startSlideshow();
      
      // Render dynamic content
      fetchHomepageData().then(stats => {
          if(stats) {
              window.liveStats = stats;
              const statsSection = document.querySelector('.stats');
              if (statsSection.classList.contains('visible')) {
                    const teamsEl = document.getElementById('teams-stat');
                    const playersEl = document.getElementById('players-stat');
                    const prizeEl = document.getElementById('prize-stat');
                    animateValue(teamsEl, 0, window.liveStats.teams || 0, 2000);
                    animateValue(playersEl, 0, window.liveStats.players || 0, 2000);
                    animateValue(prizeEl, 0, window.liveStats.prizes || 0, 2000, '$');
              }
          }
      });
    });
  </script>
</body>
</html>

